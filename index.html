<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escritor - Página Oficial</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Ecos Literários</h1>
        <nav>
            <ul>
                <li><a href="index.html">Textos</a></li>
                <li><a href="biografia.html">Biografia</a></li>
                <li><a href="admin.html">Admin</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="textos">
            <h2>Textos</h2>
            <form id="form-texto">
                <label for="titulo">Título:</label>
                <input type="text" id="titulo" required>
                <label for="conteudo">Conteúdo:</label>
                <textarea id="conteudo" rows="4" required></textarea>
                <button type="submit">Enviar</button>
            </form>
            <div id="textos-salvos"></div>
        </section>
    </main>

    <footer id="contato">
        <h2>Receba meus textos</h2>
        <form action="#" method="post">
            <label for="email">Digite seu email:</label>
            <input type="email" id="email" name="email" placeholder="Seu email..." required>
            <button type="submit">Inscrever-se</button>
        </form>
        <p>Helton Cassoma.</p>
        <p>&copy; 2025 - Todos os direitos reservados.</p>
    </footer>

    <script>
        // Função para carregar os textos salvos
        function carregarTextos() {
            const textosSalvos = JSON.parse(localStorage.getItem("textos")) || [];
            const divTextos = document.getElementById("textos-salvos");
            divTextos.innerHTML = ''; // Limpa a seção antes de mostrar os textos

            textosSalvos.forEach((texto, index) => {
                const artigo = document.createElement("article");
                artigo.classList.add("texto");

                artigo.innerHTML = `
                    <h3>${texto.titulo}</h3>
                    <p>${texto.conteudo}</p>
                    <button class="adoro-btn" id="adoro-${index}" onclick="incrementarAdoro(${index})">
                        Adoro! <span id="adoro-count-${index}">${texto.adoro || 0}</span>
                    </button>
                    <button class="unlike-btn" id="unlike-${index}" onclick="diminuirAdoro(${index})" disabled>Unlike</button>
                `;
                divTextos.appendChild(artigo);
            });
        }

        // Função para adicionar novo texto ao localStorage
        document.getElementById("form-texto").addEventListener("submit", function(event) {
            event.preventDefault();

            const titulo = document.getElementById("titulo").value;
            const conteudo = document.getElementById("conteudo").value;
            const novosTextos = JSON.parse(localStorage.getItem("textos")) || [];

            // Adiciona o novo texto
            novosTextos.push({ titulo, conteudo, adoro: 0 });

            // Salva novamente no localStorage
            localStorage.setItem("textos", JSON.stringify(novosTextos));

            // Limpa o formulário e recarrega os textos
            document.getElementById("form-texto").reset();
            carregarTextos();
        });

        // Função para incrementar o "Adoro!" de um texto
        function incrementarAdoro(index) {
            const contador = document.getElementById(`adoro-count-${index}`);
            let atual = parseInt(contador.textContent);
            atual++;
            contador.textContent = atual;

            // Desabilita o botão de "Adoro!"
            document.getElementById(`adoro-${index}`).disabled = true;
            // Habilita o botão de "Unlike"
            document.getElementById(`unlike-${index}`).disabled = false;

            // Atualiza o contador no localStorage
            const textosSalvos = JSON.parse(localStorage.getItem("textos"));
            textosSalvos[index].adoro = atual;
            localStorage.setItem("textos", JSON.stringify(textosSalvos));
        }

        // Função para diminuir o "Adoro!" de um texto
        function diminuirAdoro(index) {
            const contador = document.getElementById(`adoro-count-${index}`);
            let atual = parseInt(contador.textContent);
            if (atual > 0) {
                atual--;
                contador.textContent = atual;

                // Desabilita o botão de "Unlike"
                document.getElementById(`unlike-${index}`).disabled = true;
                // Habilita o botão de "Adoro!" novamente
                document.getElementById(`adoro-${index}`).disabled = false;

                // Atualiza o contador no localStorage
                const textosSalvos = JSON.parse(localStorage.getItem("textos"));
                textosSalvos[index].adoro = atual;
                localStorage.setItem("textos", JSON.stringify(textosSalvos));
            }
        }

        // Carregar textos e contadores ao carregar a página
        document.addEventListener("DOMContentLoaded", carregarTextos);
    </script>
</body>
</html>
